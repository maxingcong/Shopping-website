(function(f){f.fn.qrcode=function(a){"string"===typeof a&&(a={text:a});a=f.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:QRErrorCorrectLevel.H,background:"#ffffff",foreground:"#000000"},a);return this.each(function(){var b;if("canvas"==a.render){b=new QRCode(a.typeNumber,a.correctLevel);b.addData(a.text);b.make();var g=document.createElement("canvas");g.width=a.width;g.height=a.height;for(var k=g.getContext("2d"),e=a.width/b.getModuleCount(),h=a.height/b.getModuleCount(),
d=0;d<b.getModuleCount();d++)for(var c=0;c<b.getModuleCount();c++){k.fillStyle=b.isDark(d,c)?a.foreground:a.background;var l=Math.ceil((c+1)*e)-Math.floor(c*e),m=Math.ceil((d+1)*e)-Math.floor(d*e);k.fillRect(Math.round(c*e),Math.round(d*h),l,m)}}else for(b=new QRCode(a.typeNumber,a.correctLevel),b.addData(a.text),b.make(),g=f("<table></table>").css("width",a.width+"px").css("height",a.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",a.background),k=a.width/
b.getModuleCount(),e=a.height/b.getModuleCount(),h=0;h<b.getModuleCount();h++)for(d=f("<tr></tr>").css("height",e+"px").appendTo(g),c=0;c<b.getModuleCount();c++)f("<td></td>").css("width",k+"px").css("background-color",b.isDark(h,c)?a.foreground:a.background).appendTo(d);b=g;f(b).appendTo(this)})}})(jQuery);
