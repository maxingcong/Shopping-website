!function(e){"function"==typeof define&&define.amd?define(["jquery","jquery-mousewheel","date-functions"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){"use strict";function t(e,t,o){this.date=e,this.desc=t,this.style=o}var o={i18n:{en:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],dayOfWeekShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ch:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"]},zh:{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]},"zh-TW":{months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],dayOfWeekShort:["日","一","二","三","四","五","六"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"]}},value:"",rtl:!1,format:"Y/m/d H:i",formatTime:"H:i",formatDate:"Y/m/d",startDate:!1,step:60,monthChangeSpinner:!0,closeOnDateSelect:!1,closeOnTimeSelect:!0,closeOnWithoutClick:!0,closeOnInputClick:!0,timepicker:!0,datepicker:!0,weeks:!1,defaultTime:!1,defaultDate:!1,minDate:!1,maxDate:!1,minTime:!1,maxTime:!1,disabledMinTime:!1,disabledMaxTime:!1,allowTimes:[],opened:!1,initTime:!0,inline:!1,theme:"",onSelectDate:function(){},onSelectTime:function(){},onChangeMonth:function(){},onGetWeekOfYear:function(){},onChangeYear:function(){},onChangeDateTime:function(){},onShow:function(){},onClose:function(){},onGenerate:function(){},withoutCopyright:!0,inverseButton:!1,hours12:!1,next:"xdsoft_next",prev:"xdsoft_prev",dayOfWeekStart:0,parentID:"body",timeHeightInTimePicker:25,timepickerScrollbar:!0,todayButton:!0,prevButton:!0,nextButton:!0,defaultSelect:!0,scrollMonth:!0,scrollTime:!0,scrollInput:!0,lazyInit:!1,mask:!1,validateOnBlur:!0,allowBlank:!0,yearStart:1950,yearEnd:2050,monthStart:0,monthEnd:11,style:"",id:"",fixed:!1,roundTime:"round",className:"",weekends:[],highlightedDates:[],highlightedPeriods:[],allowDates:[],allowDateRe:null,disabledDates:[],disabledWeekDays:[],yearOffset:0,beforeShowDay:null,enterLikeTab:!0,showApplyButton:!1},n=null,a="zh",i="zh",s={meridiem:["上午","下午"]},r=function(){var t=o.i18n[i],a={days:t.dayOfWeek,daysShort:t.dayOfWeekShort,months:t.months,monthsShort:e.map(t.months,function(e){return e.substring(0,3)})};n=new DateFormatter({dateSettings:e.extend({},s,a)})};e.datetimepicker={setLocale:function(e){var t=o.i18n[e]?e:a;i!=t&&(i=t,r())},RFC_2822:"D, d M Y H:i:s O",ATOM:"Y-m-dTH:i:sP",ISO_8601:"Y-m-dTH:i:sO",RFC_822:"D, d M y H:i:s O",RFC_850:"l, d-M-y H:i:s T",RFC_1036:"D, d M y H:i:s O",RFC_1123:"D, d M Y H:i:s O",RSS:"D, d M Y H:i:s O",W3C:"Y-m-dTH:i:sP"},r(),window.getComputedStyle||(window.getComputedStyle=function(e,t){return this.el=e,this.getPropertyValue=function(t){var o=/(\-([a-z]){1})/g;return"float"===t&&(t="styleFloat"),o.test(t)&&(t=t.replace(o,function(e,t,o){return o.toUpperCase()})),e.currentStyle[t]||null},this}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var o,n;for(o=t||0,n=this.length;n>o;o+=1)if(this[o]===e)return o;return-1}),Date.prototype.countDaysInMonth=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},e.fn.xdsoftScroller=function(t){return this.each(function(){var o,n,a,i,s,r=e(this),d=function(e){var t,o={x:0,y:0};return"touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type?(t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],o.x=t.clientX,o.y=t.clientY):("mousedown"===e.type||"mouseup"===e.type||"mousemove"===e.type||"mouseover"===e.type||"mouseout"===e.type||"mouseenter"===e.type||"mouseleave"===e.type)&&(o.x=e.clientX,o.y=e.clientY),o},l=100,c=!1,u=0,f=0,m=0,h=!1,g=0,p=function(){};return"hide"===t?void r.find(".xdsoft_scrollbar").hide():(e(this).hasClass("xdsoft_scroller_box")||(o=r.children().eq(0),n=r[0].clientHeight,a=o[0].offsetHeight,i=e('<div class="xdsoft_scrollbar"></div>'),s=e('<div class="xdsoft_scroller"></div>'),i.append(s),r.addClass("xdsoft_scroller_box").append(i),p=function(e){var t=d(e).y-u+g;0>t&&(t=0),t+s[0].offsetHeight>m&&(t=m-s[0].offsetHeight),r.trigger("scroll_element.xdsoft_scroller",[l?t/l:0])},s.on("touchstart.xdsoft_scroller mousedown.xdsoft_scroller",function(o){n||r.trigger("resize_scroll.xdsoft_scroller",[t]),u=d(o).y,g=parseInt(s.css("margin-top"),10),m=i[0].offsetHeight,"mousedown"===o.type||"touchstart"===o.type?(document&&e(document.body).addClass("xdsoft_noselect"),e([document.body,window]).on("touchend mouseup.xdsoft_scroller",function a(){e([document.body,window]).off("touchend mouseup.xdsoft_scroller",a).off("mousemove.xdsoft_scroller",p).removeClass("xdsoft_noselect")}),e(document.body).on("mousemove.xdsoft_scroller",p)):(h=!0,o.stopPropagation(),o.preventDefault())}).on("touchmove",function(e){h&&(e.preventDefault(),p(e))}).on("touchend touchcancel",function(e){h=!1,g=0}),r.on("scroll_element.xdsoft_scroller",function(e,t){n||r.trigger("resize_scroll.xdsoft_scroller",[t,!0]),t=t>1?1:0>t||isNaN(t)?0:t,s.css("margin-top",l*t),setTimeout(function(){o.css("marginTop",-parseInt((o[0].offsetHeight-n)*t,10))},10)}).on("resize_scroll.xdsoft_scroller",function(e,t,d){var c,u;n=r[0].clientHeight,a=o[0].offsetHeight,c=n/a,u=c*i[0].offsetHeight,c>1?s.hide():(s.show(),s.css("height",parseInt(u>10?u:10,10)),l=i[0].offsetHeight-s[0].offsetHeight,d!==!0&&r.trigger("scroll_element.xdsoft_scroller",[t||Math.abs(parseInt(o.css("marginTop"),10))/(a-n)]))}),r.on("mousewheel",function(e){var t=Math.abs(parseInt(o.css("marginTop"),10));return t-=20*e.deltaY,0>t&&(t=0),r.trigger("scroll_element.xdsoft_scroller",[t/(a-n)]),e.stopPropagation(),!1}),r.on("touchstart",function(e){c=d(e),f=Math.abs(parseInt(o.css("marginTop"),10))}),r.on("touchmove",function(e){if(c){e.preventDefault();var t=d(e);r.trigger("scroll_element.xdsoft_scroller",[(f-(t.y-c.y))/(a-n)])}}),r.on("touchend touchcancel",function(e){c=!1,f=0})),void r.trigger("resize_scroll.xdsoft_scroller",[t]))})},e.fn.datetimepicker=function(a){var s,r,d=48,l=57,c=96,u=105,f=17,m=46,h=13,g=27,p=8,x=37,D=38,v=39,T=40,y=9,w=116,_=65,b=67,k=86,S=90,M=89,C=!1,O=e.isPlainObject(a)||!a?e.extend(!0,{},o,a):e.extend(!0,{},o),Y=0,F=function(e){e.on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function t(o){e.is(":disabled")||e.data("xdsoft_datetimepicker")||(clearTimeout(Y),Y=setTimeout(function(){e.data("xdsoft_datetimepicker")||s(e),e.off("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",t).trigger("open.xdsoft")},100))})};return s=function(o){function s(){var e,t=!1;return O.startDate?t=I.strToDate(O.startDate):(t=O.value||(o&&o.val&&o.val()?o.val():""),t?t=I.strToDateTime(t):O.defaultDate&&(t=I.strToDateTime(O.defaultDate),O.defaultTime&&(e=I.strtotime(O.defaultTime),t.setHours(e.getHours()),t.setMinutes(e.getMinutes())))),t&&I.isValidDate(t)?P.data("changed",!0):t="",t||0}var r,Y,F,H,W,I,P=e('<div class="xdsoft_datetimepicker xdsoft_noselect"></div>'),R=e('<div class="xdsoft_copyright"><a target="_blank" href="http://xdsoft.net/jqplugins/datetimepicker/">xdsoft.net</a></div>'),A=e('<div class="xdsoft_datepicker active"></div>'),j=e('<div class="xdsoft_mounthpicker"><button type="button" class="xdsoft_prev"></button><button type="button" class="xdsoft_today_button"></button><div class="xdsoft_label xdsoft_month"><span></span><i></i></div><div class="xdsoft_label xdsoft_year"><span></span><i></i></div><button type="button" class="xdsoft_next"></button></div>'),B=e('<div class="xdsoft_calendar"></div>'),q=e('<div class="xdsoft_timepicker active"><button type="button" class="xdsoft_prev"></button><div class="xdsoft_time_box"></div><button type="button" class="xdsoft_next"></button></div>'),z=q.find(".xdsoft_time_box").eq(0),V=e('<div class="xdsoft_time_variant"></div>'),E=e('<button type="button" class="xdsoft_save_selected blue-gradient-button">Save Selected</button>'),N=e('<div class="xdsoft_select xdsoft_monthselect"><div></div></div>'),G=e('<div class="xdsoft_select xdsoft_yearselect"><div></div></div>'),$=!1,L=0,J=0;O.id&&P.attr("id",O.id),O.style&&P.attr("style",O.style),O.weeks&&P.addClass("xdsoft_showweeks"),O.rtl&&P.addClass("xdsoft_rtl"),P.addClass("xdsoft_"+O.theme),P.addClass(O.className),j.find(".xdsoft_month span").after(N),j.find(".xdsoft_year span").after(G),j.find(".xdsoft_month,.xdsoft_year").on("touchstart mousedown.xdsoft",function(t){var o,n,a=e(this).find(".xdsoft_select").eq(0),i=0,s=0,r=a.is(":visible");for(j.find(".xdsoft_select").hide(),I.currentTime&&(i=I.currentTime[e(this).hasClass("xdsoft_month")?"getMonth":"getFullYear"]()),a[r?"hide":"show"](),o=a.find("div.xdsoft_option"),n=0;n<o.length&&o.eq(n).data("value")!==i;n+=1)s+=o[0].offsetHeight;return a.xdsoftScroller(s/(a.children()[0].offsetHeight-a[0].clientHeight)),t.stopPropagation(),!1}),j.find(".xdsoft_select").xdsoftScroller().on("touchstart mousedown.xdsoft",function(e){e.stopPropagation(),e.preventDefault()}).on("touchstart mousedown.xdsoft",".xdsoft_option",function(t){(void 0===I.currentTime||null===I.currentTime)&&(I.currentTime=I.now());var o=I.currentTime.getFullYear();I&&I.currentTime&&I.currentTime[e(this).parent().parent().hasClass("xdsoft_monthselect")?"setMonth":"setFullYear"](e(this).data("value")),e(this).parent().parent().hide(),P.trigger("xchange.xdsoft"),O.onChangeMonth&&e.isFunction(O.onChangeMonth)&&O.onChangeMonth.call(P,I.currentTime,P.data("input")),o!==I.currentTime.getFullYear()&&e.isFunction(O.onChangeYear)&&O.onChangeYear.call(P,I.currentTime,P.data("input"))}),P.setOptions=function(a){var i={},s=function(e){try{if(document.selection&&document.selection.createRange){var t=document.selection.createRange();return t.getBookmark().charCodeAt(2)-2}if(e.setSelectionRange)return e.selectionStart}catch(o){return 0}},r=function(e,t){if(e="string"==typeof e||e instanceof String?document.getElementById(e):e,!e)return!1;if(e.createTextRange){var o=e.createTextRange();return o.collapse(!0),o.moveEnd("character",t),o.moveStart("character",t),o.select(),!0}return e.setSelectionRange?(e.setSelectionRange(t,t),!0):!1},Y=function(e,t){var o=e.replace(/([\[\]\/\{\}\(\)\-\.\+]{1})/g,"\\$1").replace(/_/g,"{digit+}").replace(/([0-9]{1})/g,"{digit$1}").replace(/\{digit([0-9]{1})\}/g,"[0-$1_]{1}").replace(/\{digit[\+]\}/g,"[0-9_]{1}");return new RegExp(o).test(t)};O=e.extend(!0,{},O,a),a.allowTimes&&e.isArray(a.allowTimes)&&a.allowTimes.length&&(O.allowTimes=e.extend(!0,[],a.allowTimes)),a.weekends&&e.isArray(a.weekends)&&a.weekends.length&&(O.weekends=e.extend(!0,[],a.weekends)),a.allowDates&&e.isArray(a.allowDates)&&a.allowDates.length&&(O.allowDates=e.extend(!0,[],a.allowDates)),a.allowDateRe&&"[object String]"===Object.prototype.toString.call(a.allowDateRe)&&(O.allowDateRe=new RegExp(a.allowDateRe)),a.highlightedDates&&e.isArray(a.highlightedDates)&&a.highlightedDates.length&&(e.each(a.highlightedDates,function(o,a){var s,r=e.map(a.split(","),e.trim),d=new t(n.parseDate(r[0],O.formatDate),r[1],r[2]),l=n.formatDate(d.date,O.formatDate);void 0!==i[l]?(s=i[l].desc,s&&s.length&&d.desc&&d.desc.length&&(i[l].desc=s+"\n"+d.desc)):i[l]=d}),O.highlightedDates=e.extend(!0,[],i)),a.highlightedPeriods&&e.isArray(a.highlightedPeriods)&&a.highlightedPeriods.length&&(i=e.extend(!0,[],O.highlightedDates),e.each(a.highlightedPeriods,function(o,a){var s,r,d,l,c,u,f;if(e.isArray(a))s=a[0],r=a[1],d=a[2],f=a[3];else{var m=e.map(a.split(","),e.trim);s=n.parseDate(m[0],O.formatDate),r=n.parseDate(m[1],O.formatDate),d=m[2],f=m[3]}for(;r>=s;)l=new t(s,d,f),c=n.formatDate(s,O.formatDate),s.setDate(s.getDate()+1),void 0!==i[c]?(u=i[c].desc,u&&u.length&&l.desc&&l.desc.length&&(i[c].desc=u+"\n"+l.desc)):i[c]=l}),O.highlightedDates=e.extend(!0,[],i)),a.disabledDates&&e.isArray(a.disabledDates)&&a.disabledDates.length&&(O.disabledDates=e.extend(!0,[],a.disabledDates)),a.disabledWeekDays&&e.isArray(a.disabledWeekDays)&&a.disabledWeekDays.length&&(O.disabledWeekDays=e.extend(!0,[],a.disabledWeekDays)),!O.open&&!O.opened||O.inline||o.trigger("open.xdsoft"),O.inline&&($=!0,P.addClass("xdsoft_inline"),o.after(P).hide()),O.inverseButton&&(O.next="xdsoft_prev",O.prev="xdsoft_next"),O.datepicker?A.addClass("active"):A.removeClass("active"),O.timepicker?q.addClass("active"):q.removeClass("active"),O.value&&(I.setCurrentTime(O.value),o&&o.val&&o.val(I.str)),isNaN(O.dayOfWeekStart)?O.dayOfWeekStart=0:O.dayOfWeekStart=parseInt(O.dayOfWeekStart,10)%7,O.timepickerScrollbar||z.xdsoftScroller("hide"),O.minDate&&/^[\+\-](.*)$/.test(O.minDate)&&(O.minDate=n.formatDate(I.strToDateTime(O.minDate),O.formatDate)),O.maxDate&&/^[\+\-](.*)$/.test(O.maxDate)&&(O.maxDate=n.formatDate(I.strToDateTime(O.maxDate),O.formatDate)),E.toggle(O.showApplyButton),j.find(".xdsoft_today_button").css("visibility",O.todayButton?"visible":"hidden"),j.find("."+O.prev).css("visibility",O.prevButton?"visible":"hidden"),j.find("."+O.next).css("visibility",O.nextButton?"visible":"hidden"),O.mask&&(o.off("keydown.xdsoft"),O.mask===!0&&(O.mask=O.format.replace(/Y/g,"9999").replace(/F/g,"9999").replace(/m/g,"19").replace(/d/g,"39").replace(/H/g,"29").replace(/i/g,"59").replace(/s/g,"59")),"string"===e.type(O.mask)&&(Y(O.mask,o.val())||(o.val(O.mask.replace(/[0-9]/g,"_")),r(o[0],0)),o.on("keydown.xdsoft",function(t){var n,a,i=this.value,F=t.which;if(F>=d&&l>=F||F>=c&&u>=F||F===p||F===m){for(n=s(this),a=F!==p&&F!==m?String.fromCharCode(F>=c&&u>=F?F-d:F):"_",F!==p&&F!==m||!n||(n-=1,a="_");/[^0-9_]/.test(O.mask.substr(n,1))&&n<O.mask.length&&n>0;)n+=F===p||F===m?-1:1;if(i=i.substr(0,n)+a+i.substr(n+1),""===e.trim(i))i=O.mask.replace(/[0-9]/g,"_");else if(n===O.mask.length)return t.preventDefault(),!1;for(n+=F===p||F===m?0:1;/[^0-9_]/.test(O.mask.substr(n,1))&&n<O.mask.length&&n>0;)n+=F===p||F===m?-1:1;Y(O.mask,i)?(this.value=i,r(this,n)):""===e.trim(i)?this.value=O.mask.replace(/[0-9]/g,"_"):o.trigger("error_input.xdsoft")}else if(-1!==[_,b,k,S,M].indexOf(F)&&C||-1!==[g,D,T,x,v,w,f,y,h].indexOf(F))return!0;return t.preventDefault(),!1}))),O.validateOnBlur&&o.off("blur.xdsoft").on("blur.xdsoft",function(){if(O.allowBlank&&!e.trim(e(this).val()).length)e(this).val(null),P.data("xdsoft_datetime").empty();else if(n.parseDate(e(this).val(),O.format))P.data("xdsoft_datetime").setCurrentTime(e(this).val());else{var t=+[e(this).val()[0],e(this).val()[1]].join(""),o=+[e(this).val()[2],e(this).val()[3]].join("");!O.datepicker&&O.timepicker&&t>=0&&24>t&&o>=0&&60>o?e(this).val([t,o].map(function(e){return e>9?e:"0"+e}).join(":")):e(this).val(n.formatDate(I.now(),O.format)),P.data("xdsoft_datetime").setCurrentTime(e(this).val())}P.trigger("changedatetime.xdsoft")}),O.dayOfWeekStartPrev=0===O.dayOfWeekStart?6:O.dayOfWeekStart-1,P.trigger("xchange.xdsoft").trigger("afterOpen.xdsoft")},P.data("options",O).on("touchstart mousedown.xdsoft",function(e){return e.stopPropagation(),e.preventDefault(),G.hide(),N.hide(),!1}),z.append(V),z.xdsoftScroller(),P.on("afterOpen.xdsoft",function(){z.xdsoftScroller()}),P.append(A).append(q),O.withoutCopyright!==!0&&P.append(R),A.append(j).append(B).append(E),e(O.parentID).append(P),r=function(){var t=this;t.now=function(e){var o,n,a=new Date;return!e&&O.defaultDate&&(o=t.strToDateTime(O.defaultDate),a.setFullYear(o.getFullYear()),a.setMonth(o.getMonth()),a.setDate(o.getDate())),O.yearOffset&&a.setFullYear(a.getFullYear()+O.yearOffset),!e&&O.defaultTime&&(n=t.strtotime(O.defaultTime),a.setHours(n.getHours()),a.setMinutes(n.getMinutes())),a},t.isValidDate=function(e){return"[object Date]"!==Object.prototype.toString.call(e)?!1:!isNaN(e.getTime())},t.setCurrentTime=function(e){t.currentTime="string"==typeof e?t.strToDateTime(e):t.isValidDate(e)?e:t.now(),P.trigger("xchange.xdsoft")},t.empty=function(){t.currentTime=null},t.getCurrentTime=function(e){return t.currentTime},t.nextMonth=function(){(void 0===t.currentTime||null===t.currentTime)&&(t.currentTime=t.now());var o,n=t.currentTime.getMonth()+1;return 12===n&&(t.currentTime.setFullYear(t.currentTime.getFullYear()+1),n=0),o=t.currentTime.getFullYear(),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),n+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(n),O.onChangeMonth&&e.isFunction(O.onChangeMonth)&&O.onChangeMonth.call(P,I.currentTime,P.data("input")),o!==t.currentTime.getFullYear()&&e.isFunction(O.onChangeYear)&&O.onChangeYear.call(P,I.currentTime,P.data("input")),P.trigger("xchange.xdsoft"),n},t.prevMonth=function(){(void 0===t.currentTime||null===t.currentTime)&&(t.currentTime=t.now());var o=t.currentTime.getMonth()-1;return-1===o&&(t.currentTime.setFullYear(t.currentTime.getFullYear()-1),o=11),t.currentTime.setDate(Math.min(new Date(t.currentTime.getFullYear(),o+1,0).getDate(),t.currentTime.getDate())),t.currentTime.setMonth(o),O.onChangeMonth&&e.isFunction(O.onChangeMonth)&&O.onChangeMonth.call(P,I.currentTime,P.data("input")),P.trigger("xchange.xdsoft"),o},t.getWeekOfYear=function(t){if(O.onGetWeekOfYear&&e.isFunction(O.onGetWeekOfYear)){var o=O.onGetWeekOfYear.call(P,t);if("undefined"!=typeof o)return o}var n=new Date(t.getFullYear(),0,1);return 4!=n.getDay()&&n.setMonth(0,1+(4-n.getDay()+7)%7),Math.ceil(((t-n)/864e5+n.getDay()+1)/7)},t.strToDateTime=function(e){var o,a,i=[];return e&&e instanceof Date&&t.isValidDate(e)?e:(i=/^(\+|\-)(.*)$/.exec(e),i&&(i[2]=n.parseDate(i[2],O.formatDate)),i&&i[2]?(o=i[2].getTime()-6e4*i[2].getTimezoneOffset(),a=new Date(t.now(!0).getTime()+parseInt(i[1]+"1",10)*o)):a=e?n.parseDate(e,O.format):t.now(),t.isValidDate(a)||(a=t.now()),a)},t.strToDate=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var o=e?n.parseDate(e,O.formatDate):t.now(!0);return t.isValidDate(o)||(o=t.now(!0)),o},t.strtotime=function(e){if(e&&e instanceof Date&&t.isValidDate(e))return e;var o=e?n.parseDate(e,O.formatTime):t.now(!0);return t.isValidDate(o)||(o=t.now(!0)),o},t.str=function(){return n.formatDate(t.currentTime,O.format)},t.currentTime=this.now()},I=new r,E.on("touchend click",function(e){e.preventDefault(),P.data("changed",!0),I.setCurrentTime(s()),o.val(I.str()),P.trigger("close.xdsoft")}),j.find(".xdsoft_today_button").on("touchend mousedown.xdsoft",function(){P.data("changed",!0),I.setCurrentTime(0),P.trigger("afterOpen.xdsoft")}).on("dblclick.xdsoft",function(){var e,t,n=I.getCurrentTime();n=new Date(n.getFullYear(),n.getMonth(),n.getDate()),e=I.strToDate(O.minDate),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()),e>n||(t=I.strToDate(O.maxDate),t=new Date(t.getFullYear(),t.getMonth(),t.getDate()),n>t||(o.val(I.str()),o.trigger("change"),P.trigger("close.xdsoft")))}),j.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var t=e(this),o=0,n=!1;!function a(e){t.hasClass(O.next)?I.nextMonth():t.hasClass(O.prev)&&I.prevMonth(),O.monthChangeSpinner&&(n||(o=setTimeout(a,e||100)))}(500),e([document.body,window]).on("touchend mouseup.xdsoft",function i(){clearTimeout(o),n=!0,e([document.body,window]).off("touchend mouseup.xdsoft",i)})}),q.find(".xdsoft_prev,.xdsoft_next").on("touchend mousedown.xdsoft",function(){var t=e(this),o=0,n=!1,a=110;!function i(e){var s=z[0].clientHeight,r=V[0].offsetHeight,d=Math.abs(parseInt(V.css("marginTop"),10));t.hasClass(O.next)&&r-s-O.timeHeightInTimePicker>=d?V.css("marginTop","-"+(d+O.timeHeightInTimePicker)+"px"):t.hasClass(O.prev)&&d-O.timeHeightInTimePicker>=0&&V.css("marginTop","-"+(d-O.timeHeightInTimePicker)+"px"),z.trigger("scroll_element.xdsoft_scroller",[Math.abs(parseInt(V.css("marginTop"),10)/(r-s))]),a=a>10?10:a-10,n||(o=setTimeout(i,e||a))}(500),e([document.body,window]).on("touchend mouseup.xdsoft",function s(){clearTimeout(o),n=!0,e([document.body,window]).off("touchend mouseup.xdsoft",s)})}),Y=0,P.on("xchange.xdsoft",function(t){clearTimeout(Y),Y=setTimeout(function(){(void 0===I.currentTime||null===I.currentTime)&&(I.currentTime=I.now());for(var t,o,s,r,d,l,c,u,f,m,h="",g=new Date(I.currentTime.getFullYear(),I.currentTime.getMonth(),1,12,0,0),p=0,x=I.now(),D=!1,v=!1,T=[],y=!0,w="",_="";g.getDay()!==O.dayOfWeekStart;)g.setDate(g.getDate()-1);for(h+="<table><thead><tr>",O.weeks&&(h+="<th></th>"),t=0;7>t;t+=1)h+="<th>"+O.i18n[i].dayOfWeekShort[(t+O.dayOfWeekStart)%7]+"</th>";for(h+="</tr></thead>",h+="<tbody>",O.maxDate!==!1&&(D=I.strToDate(O.maxDate),D=new Date(D.getFullYear(),D.getMonth(),D.getDate(),23,59,59,999)),O.minDate!==!1&&(v=I.strToDate(O.minDate),v=new Date(v.getFullYear(),v.getMonth(),v.getDate()));p<I.currentTime.countDaysInMonth()||g.getDay()!==O.dayOfWeekStart||I.currentTime.getMonth()===g.getMonth();)T=[],p+=1,s=g.getDay(),r=g.getDate(),d=g.getFullYear(),l=g.getMonth(),c=I.getWeekOfYear(g),m="",T.push("xdsoft_date"),u=O.beforeShowDay&&e.isFunction(O.beforeShowDay.call)?O.beforeShowDay.call(P,g):null,O.allowDateRe&&"[object RegExp]"===Object.prototype.toString.call(O.allowDateRe)?O.allowDateRe.test(g.dateFormat(O.formatDate))||T.push("xdsoft_disabled"):O.allowDates&&O.allowDates.length>0?-1===O.allowDates.indexOf(g.dateFormat(O.formatDate))&&T.push("xdsoft_disabled"):D!==!1&&g>D||v!==!1&&v>g||u&&u[0]===!1?T.push("xdsoft_disabled"):-1!==O.disabledDates.indexOf(n.formatDate(g,O.formatDate))?T.push("xdsoft_disabled"):-1!==O.disabledWeekDays.indexOf(s)&&T.push("xdsoft_disabled"),u&&""!==u[1]&&T.push(u[1]),I.currentTime.getMonth()!==l&&T.push("xdsoft_other_month"),(O.defaultSelect||P.data("changed"))&&n.formatDate(I.currentTime,O.formatDate)===n.formatDate(g,O.formatDate)&&T.push("xdsoft_current"),n.formatDate(x,O.formatDate)===n.formatDate(g,O.formatDate)&&T.push("xdsoft_today"),(0===g.getDay()||6===g.getDay()||-1!==O.weekends.indexOf(n.formatDate(g,O.formatDate)))&&T.push("xdsoft_weekend"),void 0!==O.highlightedDates[n.formatDate(g,O.formatDate)]&&(o=O.highlightedDates[n.formatDate(g,O.formatDate)],T.push(void 0===o.style?"xdsoft_highlighted_default":o.style),m=void 0===o.desc?"":o.desc),O.beforeShowDay&&e.isFunction(O.beforeShowDay)&&T.push(O.beforeShowDay(g)),y&&(h+="<tr>",y=!1,O.weeks&&(h+="<th>"+c+"</th>")),h+='<td data-date="'+r+'" data-month="'+l+'" data-year="'+d+'" class="xdsoft_date xdsoft_day_of_week'+g.getDay()+" "+T.join(" ")+'" title="'+m+'"><div>'+r+"</div></td>",g.getDay()===O.dayOfWeekStartPrev&&(h+="</tr>",y=!0),g.setDate(r+1);if(h+="</tbody></table>",B.html(h),j.find(".xdsoft_label span").eq(0).text(O.i18n[i].months[I.currentTime.getMonth()]),j.find(".xdsoft_label span").eq(1).text(I.currentTime.getFullYear()),w="",_="",l="",f=function(t,o){var a,i,s=I.now(),r=O.allowTimes&&e.isArray(O.allowTimes)&&O.allowTimes.length;s.setHours(t),t=parseInt(s.getHours(),10),s.setMinutes(o),o=parseInt(s.getMinutes(),10),a=new Date(I.currentTime),a.setHours(t),a.setMinutes(o),T=[],(O.minDateTime!==!1&&O.minDateTime>a||O.maxTime!==!1&&I.strtotime(O.maxTime).getTime()<s.getTime()||O.minTime!==!1&&I.strtotime(O.minTime).getTime()>s.getTime())&&T.push("xdsoft_disabled"),(O.minDateTime!==!1&&O.minDateTime>a||O.disabledMinTime!==!1&&s.getTime()>I.strtotime(O.disabledMinTime).getTime()&&O.disabledMaxTime!==!1&&s.getTime()<I.strtotime(O.disabledMaxTime).getTime())&&T.push("xdsoft_disabled"),i=new Date(I.currentTime),i.setHours(parseInt(I.currentTime.getHours(),10)),r||i.setMinutes(Math[O.roundTime](I.currentTime.getMinutes()/O.step)*O.step),(O.initTime||O.defaultSelect||P.data("changed"))&&i.getHours()===parseInt(t,10)&&(!r&&O.step>59||i.getMinutes()===parseInt(o,10))&&(O.defaultSelect||P.data("changed")?T.push("xdsoft_current"):O.initTime&&T.push("xdsoft_init_time")),parseInt(x.getHours(),10)===parseInt(t,10)&&parseInt(x.getMinutes(),10)===parseInt(o,10)&&T.push("xdsoft_today"),w+='<div class="xdsoft_time '+T.join(" ")+'" data-hour="'+t+'" data-minute="'+o+'">'+n.formatDate(s,O.formatTime)+"</div>"},O.allowTimes&&e.isArray(O.allowTimes)&&O.allowTimes.length)for(p=0;p<O.allowTimes.length;p+=1)_=I.strtotime(O.allowTimes[p]).getHours(),l=I.strtotime(O.allowTimes[p]).getMinutes(),f(_,l);else for(p=0,t=0;p<(O.hours12?12:24);p+=1)for(t=0;60>t;t+=O.step)_=(10>p?"0":"")+p,l=(10>t?"0":"")+t,f(_,l);for(V.html(w),a="",p=0,p=parseInt(O.yearStart,10)+O.yearOffset;p<=parseInt(O.yearEnd,10)+O.yearOffset;p+=1)a+='<div class="xdsoft_option '+(I.currentTime.getFullYear()===p?"xdsoft_current":"")+'" data-value="'+p+'">'+p+"</div>";for(G.children().eq(0).html(a),p=parseInt(O.monthStart,10),a="";p<=parseInt(O.monthEnd,10);p+=1)a+='<div class="xdsoft_option '+(I.currentTime.getMonth()===p?"xdsoft_current":"")+'" data-value="'+p+'">'+O.i18n[i].months[p]+"</div>";N.children().eq(0).html(a),e(P).trigger("generate.xdsoft")},10),t.stopPropagation()}).on("afterOpen.xdsoft",function(){if(O.timepicker){var e,t,o,n;V.find(".xdsoft_current").length?e=".xdsoft_current":V.find(".xdsoft_init_time").length&&(e=".xdsoft_init_time"),e?(t=z[0].clientHeight,o=V[0].offsetHeight,n=V.find(e).index()*O.timeHeightInTimePicker+1,n>o-t&&(n=o-t),z.trigger("scroll_element.xdsoft_scroller",[parseInt(n,10)/(o-t)])):z.trigger("scroll_element.xdsoft_scroller",[0])}}),F=0,B.on("touchend click.xdsoft","td",function(t){t.stopPropagation(),F+=1;var n=e(this),a=I.currentTime;return(void 0===a||null===a)&&(I.currentTime=I.now(),a=I.currentTime),n.hasClass("xdsoft_disabled")?!1:(a.setDate(1),a.setFullYear(n.data("year")),a.setMonth(n.data("month")),a.setDate(n.data("date")),P.trigger("select.xdsoft",[a]),o.val(I.str()),O.onSelectDate&&e.isFunction(O.onSelectDate)&&O.onSelectDate.call(P,I.currentTime,P.data("input"),t),P.data("changed",!0),P.trigger("xchange.xdsoft"),P.trigger("changedatetime.xdsoft"),(F>1||O.closeOnDateSelect===!0||O.closeOnDateSelect===!1&&!O.timepicker)&&!O.inline&&P.trigger("close.xdsoft"),void setTimeout(function(){F=0},200))}),V.on("touchend click.xdsoft","div",function(t){t.stopPropagation();var o=e(this),n=I.currentTime;return(void 0===n||null===n)&&(I.currentTime=I.now(),n=I.currentTime),o.hasClass("xdsoft_disabled")?!1:(n.setHours(o.data("hour")),n.setMinutes(o.data("minute")),P.trigger("select.xdsoft",[n]),P.data("input").val(I.str()),O.onSelectTime&&e.isFunction(O.onSelectTime)&&O.onSelectTime.call(P,I.currentTime,P.data("input"),t),P.data("changed",!0),P.trigger("xchange.xdsoft"),P.trigger("changedatetime.xdsoft"),void(O.inline!==!0&&O.closeOnTimeSelect===!0&&P.trigger("close.xdsoft")))}),A.on("mousewheel.xdsoft",function(e){return O.scrollMonth?(e.deltaY<0?I.nextMonth():I.prevMonth(),!1):!0}),o.on("mousewheel.xdsoft",function(e){return O.scrollInput?!O.datepicker&&O.timepicker?(H=V.find(".xdsoft_current").length?V.find(".xdsoft_current").eq(0).index():0,H+e.deltaY>=0&&H+e.deltaY<V.children().length&&(H+=e.deltaY),V.children().eq(H).length&&V.children().eq(H).trigger("mousedown"),!1):O.datepicker&&!O.timepicker?(A.trigger(e,[e.deltaY,e.deltaX,e.deltaY]),o.val&&o.val(I.str()),P.trigger("changedatetime.xdsoft"),!1):void 0:!0}),P.on("changedatetime.xdsoft",function(t){if(O.onChangeDateTime&&e.isFunction(O.onChangeDateTime)){var o=P.data("input");O.onChangeDateTime.call(P,I.currentTime,o,t),delete O.value,o.trigger("change")}}).on("generate.xdsoft",function(){O.onGenerate&&e.isFunction(O.onGenerate)&&O.onGenerate.call(P,I.currentTime,P.data("input")),$&&(P.trigger("afterOpen.xdsoft"),$=!1)}).on("click.xdsoft",function(e){e.stopPropagation()}),H=0,W=function(){var t,o=P.data("input").offset(),n=P.data("input")[0],a=o.top+n.offsetHeight-1,i=o.left,s="absolute";if(document.documentElement.clientWidth-o.left<A.parent().outerWidth(!0)){var r=A.parent().outerWidth(!0)-n.offsetWidth;i-=r}"rtl"==P.data("input").parent().css("direction")&&(i-=P.outerWidth()-P.data("input").outerWidth()),O.fixed?(a-=e(window).scrollTop(),i-=e(window).scrollLeft(),s="fixed"):(a+n.offsetHeight>e(window).height()+e(window).scrollTop()&&(a=o.top-n.offsetHeight+1),0>a&&(a=0),i+n.offsetWidth>e(window).width()&&(i=e(window).width()-n.offsetWidth)),t=P[0];do if(t=t.parentNode,"relative"===window.getComputedStyle(t).getPropertyValue("position")&&e(window).width()>=t.offsetWidth){i-=(e(window).width()-t.offsetWidth)/2;break}while("HTML"!==t.nodeName);P.css({left:i,top:a,position:s})},P.on("open.xdsoft",function(t){var o=!0;O.onShow&&e.isFunction(O.onShow)&&(o=O.onShow.call(P,I.currentTime,P.data("input"),t)),o!==!1&&(P.show(),W(),e(window).off("resize.xdsoft",W).on("resize.xdsoft",W),O.closeOnWithoutClick&&e([document.body,window]).on("touchstart mousedown.xdsoft",function n(){P.trigger("close.xdsoft"),e([document.body,window]).off("touchstart mousedown.xdsoft",n)}))}).on("close.xdsoft",function(t){var o=!0;j.find(".xdsoft_month,.xdsoft_year").find(".xdsoft_select").hide(),O.onClose&&e.isFunction(O.onClose)&&(o=O.onClose.call(P,I.currentTime,P.data("input"),t)),o===!1||O.opened||O.inline||P.hide(),t.stopPropagation()}).on("toggle.xdsoft",function(e){P.is(":visible")?P.trigger("close.xdsoft"):P.trigger("open.xdsoft")}).data("input",o),L=0,J=0,P.data("xdsoft_datetime",I),P.setOptions(O),I.setCurrentTime(s()),o.data("xdsoft_datetimepicker",P).on("open.xdsoft focusin.xdsoft mousedown.xdsoft touchstart",function(e){o.is(":disabled")||o.data("xdsoft_datetimepicker").is(":visible")&&O.closeOnInputClick||(clearTimeout(L),L=setTimeout(function(){o.is(":disabled")||($=!0,I.setCurrentTime(s()),P.trigger("open.xdsoft"))},100))}).on("keydown.xdsoft",function(t){var o,n=(this.value,t.which);return-1!==[h].indexOf(n)&&O.enterLikeTab?(o=e("input:visible,textarea:visible,button:visible,a:visible"),P.trigger("close.xdsoft"),o.eq(o.index(this)+1).focus(),!1):-1!==[y].indexOf(n)?(P.trigger("close.xdsoft"),!0):void 0})},r=function(t){var o=t.data("xdsoft_datetimepicker");o&&(o.data("xdsoft_datetime",null),o.remove(),t.data("xdsoft_datetimepicker",null).off(".xdsoft"),e(window).off("resize.xdsoft"),e([window,document.body]).off("mousedown.xdsoft touchstart"),t.unmousewheel&&t.unmousewheel())},e(document).off("keydown.xdsoftctrl keyup.xdsoftctrl").on("keydown.xdsoftctrl",function(e){e.keyCode===f&&(C=!0)}).on("keyup.xdsoftctrl",function(e){e.keyCode===f&&(C=!1)}),this.each(function(){var t,o=e(this).data("xdsoft_datetimepicker");if(o){if("string"===e.type(a))switch(a){case"show":e(this).select().focus(),o.trigger("open.xdsoft");break;case"hide":o.trigger("close.xdsoft");break;case"toggle":o.trigger("toggle.xdsoft");break;case"destroy":r(e(this));break;case"reset":this.value=this.defaultValue,this.value&&o.data("xdsoft_datetime").isValidDate(n.parseDate(this.value,O.format))||o.data("changed",!1),o.data("xdsoft_datetime").setCurrentTime(this.value);break;case"validate":t=o.data("input"),t.trigger("blur.xdsoft")}else o.setOptions(a);return 0}"string"!==e.type(a)&&(!O.lazyInit||O.open||O.inline?s(e(this)):F(e(this)))})},e.fn.datetimepicker.defaults=o});